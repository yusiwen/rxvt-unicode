# doc/Makefile.in	-*- Makefile -*-

DATE=@DATE@
VERSION=@VERSION@
RXVTNAME=@RXVTNAME@
SHELL = /bin/sh
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
libdir = @libdir@
includedir = @includedir@
man1dir = @mandir@/man1
man1ext = 1
man3dir = @mandir@/man3
man3ext = 3
man7dir = @mandir@/man7
man7ext = 7
CP = @CP@
LN = @LN@
SED = @SED@
ECHO = @ECHO@
PERL = @PERL@
INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL@ -m 755
INSTALL_DATA = @INSTALL@ -m 644

srcdir =	@srcdir@
VPATH =		@srcdir@
.PATH:		@srcdir@

basedir = ..
thisdir = doc

first_rule: all
dummy:

#-------------------------------------------------------------------------

all:

SEDREPLACE = -e 's%@@RXVT_VERSION@@%$(VERSION)%g;'	\
	     -e 's%@@RXVT_NAME@@%$(RXVTNAME)%g;'	\
	     -e 's%@@RXVT_DATE@@%$(DATE)%g;'		\
	     -e 's%@@RXVT_LIBDIR@@%$(libdir)%g;'	\
	     -e 's%@@URXVT_NAME@@%urxvt%g;'

rxvtperl.3.pod: ../src/urxvt.pm
	$(CP) $< $@

%.tbl: %.pod
	./podtbl <$< >$@

%.1.man.in: %.1.tbl
	pod2man -n @@RXVT_NAME@@ -r"$(VERSION)" -q\" -s1 -c "RXVT-UNICODE" <$< >$@

%.3.man.in: %.3.tbl
	pod2man -n @@RXVT_NAME@@ -r"$(VERSION)" -q\" -s3 -c "RXVT-UNICODE" <$< >$@

%.7.man.in: %.7.tbl
	pod2man -n @@RXVT_NAME@@ -r"$(VERSION)" -q\" -s7 -c "RXVT-UNICODE" <$< >$@

%.html: %.tbl
	$(SED) $(SEDREPLACE) <$< | pod2html >$@

%.txt: %.tbl
	$(SED) $(SEDREPLACE) <$< | pod2text >$@

../README.configure: rxvt.7.tbl
	$(SED) $(SEDREPLACE) <$< | podselect -section "CONFIGURE OPTIONS" | pod2text >$@

../README.FAQ: rxvt.7.tbl
	$(SED) $(SEDREPLACE) <$< | podselect -section "RXVT-UNICODE\/URXVT FREQUENTLY ASKED QUESTIONS" | pod2text >$@

tags allbin:

alldoc:	rxvt.1.man.in rxvt.7.man.in rxvtc.1.man.in rxvtd.1.man.in rxvtperl.3.man.in \
	rxvt.1.txt    rxvt.7.txt    rxvtc.1.txt    rxvtd.1.txt    rxvtperl.3.txt \
	rxvt.1.html   rxvt.7.html   rxvtc.1.html   rxvtd.1.html   rxvtperl.3.html \
	../README.configure ../README.FAQ
	infocmp -C rxvt-unicode >etc/rxvt-unicode.termcap

clean:
	rm -f *~

realclean: clean
	rm -f tags ../README.configure ../README.FAQ
	rm -f rxvt.1.man.in rxvt.7.man.in rxvtc.1.man.in rxvtd.1.man.in
	rm -f rxvt.1.man    rxvt.7.man    rxvtc.1.man    rxvtd.1.man   
	rm -f rxvt.1.txt    rxvt.7.txt    rxvtc.1.txt    rxvtd.1.txt
	rm -f rxvt.1.html   rxvt.7.html   rxvtc.1.html   rxvtd.1.html

cleandir: realclean

distclean:

install:
	$(INSTALL) -d $(DESTDIR)$(man1dir)
	$(SED) $(SEDREPLACE) < rxvt.1.man.in >rxvt.1.man
	$(INSTALL_DATA) rxvt.1.man $(DESTDIR)$(man1dir)/$(RXVTNAME).$(man1ext)
	$(SED) $(SEDREPLACE) < rxvtc.1.man.in >rxvtc.1.man
	$(INSTALL_DATA) rxvtc.1.man $(DESTDIR)$(man1dir)/$(RXVTNAME)c.$(man1ext)
	$(SED) $(SEDREPLACE) < rxvtd.1.man.in >rxvtd.1.man
	$(INSTALL_DATA) rxvtd.1.man $(DESTDIR)$(man1dir)/$(RXVTNAME)d.$(man1ext)
	$(INSTALL) -d $(DESTDIR)$(man7dir)
	$(SED) $(SEDREPLACE) < rxvt.7.man.in >rxvt.7.man
	$(INSTALL_DATA) rxvt.7.man $(DESTDIR)$(man7dir)/$(RXVTNAME).$(man7ext)
@IF_PERL@	$(INSTALL) -d $(DESTDIR)$(man3dir)
@IF_PERL@	$(SED) $(SEDREPLACE) < rxvtperl.3.man.in >rxvtperl.3.man
@IF_PERL@	$(INSTALL_DATA) rxvtperl.3.man $(DESTDIR)$(man3dir)/$(RXVTNAME)perl.$(man3ext)
	if test -x "@TIC@"; then if test -n "@TIC@"; then @TIC@ etc/rxvt-unicode.terminfo; fi; fi

uninstall:
	-(cd $(mandir); rm -f $(RXVTNAME).$(manext) )

distdepend: alldoc

# ------------------------------------------------------------------------
# DO NOT DELETE: ugly dependency list follows
